{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"53387136-aec480b6b069bc63c101bbeda\";\nexport const PER_PAGE = 40;\n\nexport async function fetchImages(query, page = 1, per_page = PER_PAGE) {\n  const q = String(query || \"\").trim();\n  if (!q) {\n    throw new Error(\"Empty search query\");\n  }\n\n  const params = {\n    key: API_KEY,\n    q,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data; // повертаємо саме те, що прийшло з API\n  } catch (err) {\n    if (err.response) {\n      throw new Error(`API error: ${err.response.status} ${err.response.statusText}`);\n    } else if (err.request) {\n      throw new Error(\"Network error: no response from server\");\n    } else {\n        throw new Error(err.message);\n    }\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = null;\n\nexport function renderPhoto(arr) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n  </a>\n  <div class=\"info\">\n    <p class=\"info-item\">Likes: <span class=\"info-span\">${likes}</span></p>\n    <p class=\"info-item\">Views: <span class=\"info-span\">${views}</span></p>\n    <p class=\"info-item\">Comments: <span class=\"info-span\">${comments}</span></p>\n    <p class=\"info-item\">Downloads: <span class=\"info-span\">${downloads}</span></p>\n  </div>\n</li>`\n    )\n    .join(\"\");\n\n  const gallery = document.querySelector(\".gallery\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n      captionPosition: \"bottom\",\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\nexport function showLoader() {\n  document.querySelector(\".loader\").classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  document.querySelector(\".loader\").classList.add(\"hidden\");\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderPhoto, clearGallery, showLoader, hideLoader } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\n\nform.addEventListener(\"submit\", onSearch);\n\nfunction showError(message) {\n  iziToast.error({\n    title: \"Помилка\",\n    message: message,\n    position: \"topRight\",\n    timeout: 4000,\n  });\n}\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const query = e.target.elements.searchQuery.value.trim();\n  if (!query) {\n    showError(\"Будь ласка, введіть пошуковий запит\");\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await fetchImages(query);\n    if (!data || !data.hits || data.hits.length === 0) {\n      showError(\"Sorry, there are no images matching your search query. Please try again!\");\n      return;\n    }\n    renderPhoto(data.hits);\n  } catch (err) {\n    showError(\"Помилка: \" + (err.message || err));\n  } finally {\n    hideLoader();\n  }\n}"],"names":["BASE_URL","API_KEY","PER_PAGE","fetchImages","query","page","per_page","q","params","axios","err","lightbox","renderPhoto","arr","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","form","onSearch","showError","message","iziToast","e","data"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCACHC,EAAW,GAEjB,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAWJ,EAAU,CACtE,MAAMK,EAAI,OAAOH,GAAS,EAAE,EAAE,KAAI,EAClC,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,oBAAoB,EAGtC,MAAMC,EAAS,CACb,IAAKP,EACL,EAAAM,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAF,EACA,SAAAC,CACJ,EAEE,GAAI,CAEF,OADiB,MAAMG,EAAM,IAAIT,EAAU,CAAE,OAAAQ,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAK,CACZ,MAAIA,EAAI,SACA,IAAI,MAAM,cAAcA,EAAI,SAAS,MAAM,IAAIA,EAAI,SAAS,UAAU,EAAE,EACrEA,EAAI,QACP,IAAI,MAAM,wCAAwC,EAEhD,IAAI,MAAMA,EAAI,OAAO,CAEhC,CACH,CC/BA,IAAIC,EAAW,KAER,SAASC,EAAYC,EAAK,CAC/B,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,kCAEsBL,CAAa;AAAA,sCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0DAGNC,CAAK;AAAA,0DACLC,CAAK;AAAA,6DACFC,CAAQ;AAAA,8DACPC,CAAS;AAAA;AAAA,MAGlE,EACA,KAAK,EAAE,EAEM,SAAS,cAAc,UAAU,EACzC,mBAAmB,YAAaP,CAAM,EAEzCH,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIW,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,gBAAiB,QACvB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,CAC7D,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,CAC1D,CClDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3B,SAAS,cAAc,UAAU,EAEjDA,EAAK,iBAAiB,SAAUC,CAAQ,EAExC,SAASC,EAAUC,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,UACP,QAASD,EACT,SAAU,WACV,QAAS,GACb,CAAG,CACH,CAEA,eAAeF,EAASI,EAAG,CACzBA,EAAE,eAAc,EAEhB,MAAM3B,EAAQ2B,EAAE,OAAO,SAAS,YAAY,MAAM,OAClD,GAAI,CAAC3B,EAAO,CACVwB,EAAU,qCAAqC,EAC/C,MACD,CAEDL,IACAC,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAM7B,EAAYC,CAAK,EACpC,GAAI,CAAC4B,GAAQ,CAACA,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACjDJ,EAAU,0EAA0E,EACpF,MACD,CACDhB,EAAYoB,EAAK,IAAI,CACtB,OAAQtB,EAAK,CACZkB,EAAU,aAAelB,EAAI,SAAWA,EAAI,CAChD,QAAY,CACRe,GACD,CACH"}